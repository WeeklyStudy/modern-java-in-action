# https://github.com/WeeklyStudy/modern-java-in-action/issues/10 ìŠ¤íŠ¸ë¦¼ì˜ ê²Œìœ¼ë¦„(Lazy)ì´ë€ ë¬´ì—‡ì´ê³  ë£¨í”„í“¨ì „ì€ ë¬´ì—‡ì¸ê°€?
    
## ğŸ’¡Eager Evaluation(ì¡°ê¸‰í•œ ì—°ì‚°)

> ë³€ìˆ˜ì— ì ‘ê·¼í•˜ë©´ ê³§ë°”ë¡œ ì—°ì‚°ì„ ì‹œì‘í•˜ëŠ” ê¸°ë²•ì´ë‹¤.
> 

## ğŸ’¡Lazy Evaluation(ì§€ì—° ì—°ì‚°)

> ê²°ê³¼ê°’ì´ í•„ìš”í•  ë•Œê¹Œì§€ ê³„ì‚°ì„ ëŠ¦ì¶”ëŠ” ê¸°ë²•ì´ë‹¤.
> 
- ë¶ˆí•„ìš”í•œ ì—°ì‚°ì€ ìˆ˜í–‰í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ëŒ€ë¶€ë¶„ ì„±ëŠ¥ì´ ì¢‹ë‹¤.
- ë‹¤ë§Œ, **ì§€ì—° ì—°ì‚°ì„ ìœ„í•œ ë‚´ë¶€ ì¤€ë¹„ ì‘ì—…**ì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ë¬´ì¡°ê±´ íš¨ìœ¨ì ì¸ ë°©ì‹ì€ ì•„ë‹ˆë‹¤.

## ğŸ’¡ìŠ¤íŠ¸ë¦¼ì˜ ì§€ì—° ì—°ì‚°ê³¼ ìµœì í™”

1. ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì´ ì‹¤í–‰ëœë‹¤.
2. **ì „ì²´ íŒŒì´í”„ë¼ì¸ êµ¬ì„±(ì–´ë–¤ ì¤‘ê°„ ì—°ì‚°, ìµœì¢… ì—°ì‚°ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆëŠ”ì§€)ë¥¼ ê²€ì‚¬**í•œë‹¤.
3. ê²€ì‚¬ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ JVMì€ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ìµœì í™”ë¥¼ ì§„í–‰í• ì§€ ê³„íší•œë‹¤.
4. ê³„íšì— ë”°ë¼ **ìµœì¢… ì—°ì‚°ì´ í˜¸ì¶œë˜ëŠ” ì‹œì ì— ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì„ ìˆ˜í–‰**í•œë‹¤.

## ğŸ’¡ë£¨í”„ í“¨ì „(loop fusion)ì´ë€?

> íŒŒì´í”„ë¼ì¸ì—ì„œ **ë³µìˆ˜ì˜ ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì„ í•˜ë‚˜ì˜ ì—°ì‚° ê³¼ì •ìœ¼ë¡œ ë³‘í•©**í•˜ëŠ” ê²ƒì´ë‹¤.
> 
- ë£¨í”„ í“¨ì „ì€ **ìŠ¤íŠ¸ë¦¼ ìµœì í™” ì „ëµ**ì˜ ì¼ì¢…ì´ë‹¤.
    - ë³µìˆ˜ì˜ ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì´ í•˜ë‚˜ë¡œ ë³‘í•©ë˜ë©´, **ê°œë³„ ìŠ¤íŠ¸ë¦¼ ìš”ì†Œì— ì ‘ê·¼í•˜ëŠ” íšŸìˆ˜ê°€ ìµœì†Œí™”**ëœë‹¤.
- ë‹¤ë§Œ, **ëª¨ë“  ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì— ëŒ€í•´ ë£¨í”„ í“¨ì „ì´ ì ìš©ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤!**
    - ì •ë ¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ëª¨ë“  ìš”ì†Œê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” ë£¨í”„ í“¨ì „ì´ ì ìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

## ğŸ’¡ì‡¼íŠ¸ ì„œí‚·(short circuit)ì´ë€?

> **ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ**ìœ¼ë¡œì¨ ì‹¤í–‰ ì†ë„ë¥¼ ë†’ì´ëŠ” ê¸°ë²•ì´ë‹¤.
> 
- ìŠ¤íŠ¸ë¦¼ `limit` ê°™ì€ ì—°ì‚°ì„ í™œìš©í•´ ìŠ¤íŠ¸ë¦¼ ì¼ë¶€ ìš”ì†Œë“¤ì— ëŒ€í•œ ì—°ì‚°ì„ ì™„ì „íˆ ìƒëµí•œë‹¤.

## ğŸ’¡Eager Evaluation ê³¼ Lazy Evaluation ë¹„êµ

1~10 ì´ ë‹´ê¸´ ë¦¬ìŠ¤íŠ¸ì—ì„œ 1) 6ë³´ë‹¤ ì‘ê³  2) ì§ìˆ˜ì¸ ìš”ì†Œì— 3) 10ì„ ê³±í•˜ì—¬ 4) ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“œëŠ” ì˜ˆì œë‹¤.

### 1. Eager Evaluation

> Eager Evaluation ë°©ì‹ì˜ ë°˜ë³µë¬¸ ì˜ˆì œ
> 

```java
public static void t1() {
    List<Integer> list = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
    int result = 0;
    // 1ë²ˆ
    List<Integer> list1 = new ArrayList<>();
    for (Integer i : list) {
        System.out.println(i + ": i < 6");
        if(i < 6) {
            list1.add(i);
        }
    }
    // 2ë²ˆ
    List<Integer> list2 = new ArrayList<>();
    for (Integer i : list1) {
        System.out.println(i + ": i % 2 == 0");
        if(i % 2 == 0) {
            list2.add(i);
        }
    }
    // 3ë²ˆ
    for (Integer i : list2) {
        System.out.println(i + ": i *= 10");
        i *= 10;
        result = i;
        break;
    }
    System.out.println(result);
}
```

1. ì „ì²´ ìš”ì†Œë¥¼ ëŒ€ìƒìœ¼ë¡œ 6ë³´ë‹¤ ì‘ì€ì§€ì— ëŒ€í•œ ê²€ì‚¬ë¥¼ ë°˜ë³µí•œë‹¤.
2. 1ë²ˆì—ì„œ êµ¬í•œ ìš”ì†Œë¥¼ ëŒ€ìƒìœ¼ë¡œ ì§ìˆ˜ì¸ì§€ì— ëŒ€í•œ ê²€ì‚¬ë¥¼ ë°˜ë³µí•œë‹¤.
3. 2ë²ˆì—ì„œ êµ¬í•œ ìš”ì†Œë¥¼ ëŒ€ìƒìœ¼ë¡œ 10ì„ ê³±í•˜ëŠ” ê²ƒì„ ë°˜ë³µí•œë‹¤.

â‡’ í•œ ìš”ì†Œì— 3ë²ˆ ì ‘ê·¼í•œë‹¤. 1, 2, 3 ê³¼ì •ì´ êµ¬ë¶„ë˜ì–´ ìˆë‹¤.

<img width="143" alt="Untitled (2)" src="https://github.com/WeeklyStudy/modern-java-in-action/assets/48237976/3ee9e765-0958-4a36-b484-1c3fdf4e99e0">

### 2. Lazy Evaluation

> Lazy Evaluation ë°©ì‹ì˜ Stream ì˜ˆì œ
> 

```java
public static void t2() {
    final List<Integer> list = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
    int result = list.stream()
            .filter(i -> {
                System.out.println(i + ": i < 6");
                return i < 6;
            })
            .filter(i -> {
                System.out.println(i + ": i % 2 == 0");
                return i % 2 == 0;
            })
            .map(i -> {
                System.out.println(i + ": i *= 10");
                return i * 10;
            })
            .findFirst()
            .get();
    System.out.println("================");
    System.out.println(result);
}
```

1. í•œ ìš”ì†Œê°€ 6ë³´ë‹¤ ì‘ì€ì§€ ê²€ì‚¬í•œë‹¤.
2. 1ë²ˆì„ ë§Œì¡±í•œë‹¤ë©´ ì§ìˆ˜ì¸ì§€ ê²€ì‚¬í•œë‹¤.
3. 2ë²ˆì„ ë§Œì¡±í•œë‹¤ë©´ 10ì„ ê³±í•œë‹¤.
4. 3ë²ˆì—ì„œ ê°’ì„ êµ¬í•˜ë©´ ë‚˜ë¨¸ì§€ ìš”ì†Œì— ëŒ€í•œ ì—°ì‚°ì€ í•˜ì§€ ì•ŠëŠ”ë‹¤.

â‡’ í•œ ìš”ì†Œì— 1ë²ˆ ì ‘ê·¼í•œë‹¤. 1, 2, 3 ê³¼ì •ì´ í•˜ë‚˜ë¡œ ë¬¶ì˜€ë‹¤.

<img width="140" alt="Untitled (3)" src="https://github.com/WeeklyStudy/modern-java-in-action/assets/48237976/fc4f65f9-2f55-423e-8f8c-c674b8c7d08f">

> ê°™ì€ ë™ì‘ì„ í•˜ëŠ” ë°˜ë³µë¬¸
> 

```java
public static void t3() {
    List<Integer> list = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
    int result = 0;
    // 1ë²ˆ
    for (Integer i : list) {
        System.out.println(i + ": i < 6");
        if(i<6) {
            System.out.println(i + ": i % 2 == 0");
            if(i%2==0) {
                System.out.println(i + ": i *= 10");
                i *= 10;
                result = i;
                break;
            }
        }
    }
    System.out.println("================");
    System.out.println(result);
}
```

## ğŸ’¡ê²°ë¡ 

- ìë°”8ì˜ `ìŠ¤íŠ¸ë¦¼`ì€ `Lazy Evaluation` ë°©ì‹ì´ë‹¤.
- `Lazy Evaluation` ì˜ ìµœëŒ€ ì¥ì ì€ í•„ìš”í•˜ì§€ ì•Šì€ ì—°ì‚°ì€ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ì´ë‹¤.
- ìŠ¤íŠ¸ë¦¼ì—ì„œëŠ” `ì§€ì—° ì—°ì‚°`ì„ ê¸°ë°˜ìœ¼ë¡œ `ë£¨í”„ í“¨ì „`ê³¼ `ì‡¼íŠ¸ì„œí‚·`ì˜ ìµœì í™” ì „ëµì„ ì‚¬ìš©í•œë‹¤.
- ìŠ¤íŠ¸ë¦¼ì—ì„œ `ì¤‘ê°„ ì—°ì‚°`ì€ ì¦‰ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šê³  `ìµœì¢… ì—°ì‚°`ì´ í˜¸ì¶œë  ë•Œ ë’¤ëŠ¦ê²Œ ì‹¤í–‰ëœë‹¤.

## Reference

- [[Java] ìŠ¤íŠ¸ë¦¼: ì§€ì—° ì—°ì‚°ê³¼ ìµœì í™”*](https://bugoverdose.github.io/development/stream-lazy-evaluation/)
- [[ìë°”] Lazy Evaluation ì´ë€?*](https://dororongju.tistory.com/137)
- [[10ë¶„ í…Œì½”í†¡] ì°¨ë¦¬ì˜ Stream](https://www.youtube.com/watch?v=rbm87IFpwvQ)
- [Lazy Evaluationê³¼ ë©”ëª¨ë¦¬](https://medium.com/@goinhacker/lazy-evaluation%EA%B3%BC-%EB%A9%94%EB%AA%A8%EB%A6%AC-c6789ac2173c)

# https://github.com/WeeklyStudy/modern-java-in-action/issues/11 ìŠ¤íŠ¸ë¦¼ì—ì„œ ë³‘ë ¬ ì²˜ë¦¬ëŠ” ì–´ë–»ê²Œ ì´ë£¨ì–´ì§ˆê¹Œ?

## ğŸ’¡ë³‘ë ¬ ì²˜ë¦¬(Parallel Operation)

> ë³‘ë ¬ ì²˜ë¦¬ë€ ë©€í‹° ì½”ì–´ CPU í™˜ê²½ì—ì„œ í•˜ë‚˜ì˜ ì‘ì—…ì„ ë¶„í• í•´ ê°ê°ì˜ ì½”ì–´ê°€ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬(ë™ì‹œì— ì‹¤í–‰)í•˜ëŠ” ê²ƒì´ë‹¤.
> 
- `ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼`ì€ `ë°ì´í„° ë³‘ë ¬ì„±`ì„ êµ¬í˜„í•œ ê²ƒì´ë‹¤.
- `ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼`ì€ ë‚´ë¶€ì ìœ¼ë¡œ `ForkJoinPool` ì„ ì‚¬ìš©í•œë‹¤.

> âœï¸Â ìš©ì–´ ì •ë¦¬
> 
> - `ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼` : ê°ê°ì˜ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ **ìŠ¤íŠ¸ë¦¼ ìš”ì†Œë¥¼ ì—¬ëŸ¬ ì²­í¬ë¡œ ë¶„í• í•œ ìŠ¤íŠ¸ë¦¼**
> - `ë°ì´í„° ë³‘ë ¬ì„±` : í•œ ì‘ì—… ë‚´ì— ìˆëŠ” ì „ì²´ ë°ì´í„°ë¥¼ ìª¼ê°œì„œ ì„œë¸Œ ë°ì´í„°ë¡œ ë§Œë“¤ê³  ì„œë¸Œ ë°ì´í„°ë“¤ì„ ë³‘ë ¬ ì²˜ë¦¬í•˜ëŠ” ê²ƒ

## ğŸ’¡í¬í¬/ì¡°ì¸ í”„ë ˆì„ì›Œí¬
<img src="https://github.com/WeeklyStudy/modern-java-in-action/assets/48237976/dcd11cc6-0599-48fe-9d9c-4f3fbeca6a06" width="400" height="300"/>

### 1. í¬í¬(Fork) ë‹¨ê³„

- ë°ì´í„°ë¥¼ ì„œë¸Œ ë°ì´í„°ë¡œ ë¶„ë¦¬í•œë‹¤.(ì‹¤ì œë¡œ ì°¨ë¡€ëŒ€ë¡œ ìš”ì†Œë¥¼ në“±ë¶„ í•˜ì§€ëŠ” ì•Šê³  ë‚´ë¶€ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•œë‹¤.)
- ì„œë¸Œ ë°ì´í„°ë¥¼ ë©€í‹° ì½”ì–´ì—ì„œ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•œë‹¤.

### 2. ì¡°ì¸(JOIN) ë‹¨ê³„

- ì„œë¸Œ ê²°ê³¼ë¥¼ ê²°í•©í•´ì„œ ìµœì¢… ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ ë‚¸ë‹¤.

## Reference

- [[JAVA] Stream, ìŠ¤íŠ¸ë¦¼ê³¼ ë³‘ë ¬ì²˜ë¦¬](https://ict-nroo.tistory.com/43)
- [[Java] ë³‘ë ¬ ë°ì´í„° ì²˜ë¦¬(ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼, í¬í¬/ì¡°ì¸ í”„ë ˆì„ì›Œí¬)](https://girawhale.tistory.com/131)

# https://github.com/WeeklyStudy/modern-java-in-action/issues/12 ìŠ¤íŠ¸ë¦¼ ì‚¬ìš© ì‹œ ì£¼ì˜í•  ì ì—ëŠ” ë¬´ì—‡ì´ ìˆì„ê¹Œ?
    
## ğŸ’¡ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ìƒì„± ë¬¸ì œ
- ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•  ë•Œ ìƒí™©ì— ë”°ë¼ `ë£¨í”„ í“¨ì „`ì´ ì ìš©ë˜ì§€ ì•Šì•„ ì˜ë„ì¹˜ì•Šê²Œ ë¬´í•œ ìŠ¤íŠ¸ë¦¼ì´ ìƒì„±ë˜ëŠ” ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
- ì¤‘ë³µì„ ì œê±°í•˜ëŠ” `distinct()` ë‚˜ ì „ì²´ ë°ì´í„°ë¥¼ ì •ë ¬í•˜ëŠ” `sorted()` ê°™ì€ `stateful ì—°ì‚°`ì€ ì§€ì—° ì—°ì‚°ì„ ë¬´íš¨í™”ì‹œí‚¨ë‹¤.
- `stateful ì—°ì‚°` ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ìŠ¤íŠ¸ë¦¼ì„ êµ¬ì„±í•˜ëŠ” ëª¨ë“  ìš”ì†Œê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

> âœï¸Â ìš©ì–´ ì •ë¦¬
> 
> - `ë¬´í•œ ìŠ¤íŠ¸ë¦¼` : í¬ê¸°ê°€ ì •í•´ì§€ì§€ ì•Šì€ ìŠ¤íŠ¸ë¦¼
> - `stateful ì—°ì‚°` : ì´ì „ ìƒíƒœë¥¼ ì°¸ì¡°í•˜ì§€ ì•ŠëŠ” ì—°ì‚°

### 1. ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ìƒì„± ë¬¸ì œ

- `distinct()` ëŠ” `iterate()` ë¡œë¶€í„° ë¬´í•œí•œ ê°’ì„ ë°›ì•„ë“¤ì´ê³  `limit(10)` ì— ë„ë‹¬í•˜ì§€ ëª»í•œë‹¤.
- ì„œë²„ê°€ ë‹¤ìš´ë  ë•Œê¹Œì§€ `iterate()` ê°€ ì‹¤í–‰ëœë‹¤.

```java
// ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ìƒì„± ë¬¸ì œ
public static void t1() {
      IntStream.iterate(0, n -> (n + 1) % 2)
            .distinct()
            .limit(10)
            .forEach(System.out::println);
}
```

- [distinct ì™€ sorted ì˜ ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ìƒì„± ì˜ˆì œ ì‹¤í–‰ ê²°ê³¼ì— ëŒ€í•œ ì˜ë¬¸ì ](https://github.com/WeeklyStudy/modern-java-in-action/issues/12#issuecomment-1632432817)

### 2. ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ìƒì„± ë¬¸ì œ í•´ê²°

- `iterate()`ë¡œ ë¶€í„° ìƒì„±ëœ ë¬´í•œ ìŠ¤íŠ¸ë¦¼ì— ëŒ€í•´ `limit(10)`ìœ¼ë¡œ 10ê°œì˜ ë°ì´í„°ë¥¼ ê³ ë¥´ê³  `distinct()` ë¡œ ì¤‘ë³µì„ ì œê±°í•œë‹¤.

```java
// ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ìƒì„± ë¬¸ì œ í•´ê²°
public static void t2() {
    IntStream.iterate(0, n -> (n + 1) % 2)
            .limit(10)
            .distinct()
            .forEach(System.out::println);
}
```

## ğŸ’¡ê²°ë¡ 

- `stateful ì—°ì‚°`ì€ `ì§€ì—° ì—°ì‚°`ì„ ë¬´íš¨í™”ì‹œí‚¨ë‹¤.
- `stateful ì—°ì‚°`ê³¼ `limit` ì—°ì‚°ì˜ ì˜ëª»ëœ ìˆœì„œë¡œ ì¸í•´ ì˜ë„ì¹˜ ì•Šê²Œ `ë¬´í•œ ìŠ¤íŠ¸ë¦¼`ì´ ìƒì„±ë  ìˆ˜ ìˆë‹¤.
- `ë¬´í•œ ìŠ¤íŠ¸ë¦¼`ì„ ìƒì„±í•˜ëŠ” `iterate()` ì™€ `generate()` ëŠ” ë³´í†µ `limit()`ì™€ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.

## Reference

- ìŠ¤íŠ¸ë¦¼ ì£¼ì˜í•  ì 
    - [[Java] ìŠ¤íŠ¸ë¦¼: ì§€ì—° ì—°ì‚°ê³¼ ìµœì í™”*](https://bugoverdose.github.io/development/stream-lazy-evaluation/)
    - [ìë°”8 Streams API ë¥¼ ë‹¤ë£°ë•Œ ì‹¤ìˆ˜í•˜ê¸° ì‰¬ìš´ê²ƒ 10ê°€ì§€](https://hamait.tistory.com/547)
    - [[Effective Java] ì•„ì´í…œ 45 : ìŠ¤íŠ¸ë¦¼ì€ ì£¼ì˜í•´ì„œ ì‚¬ìš©í•˜ë¼*](https://velog.io/@semi-cloud/Effective-Java-%EC%95%84%EC%9D%B4%ED%85%9C-45-%EC%8A%A4%ED%8A%B8%EB%A6%BC%EC%9D%80-%EC%A3%BC%EC%9D%98%ED%95%B4%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC)
- stateful ì—°ì‚°
    - [[Java8] Stream API](https://jjingho.tistory.com/146)
